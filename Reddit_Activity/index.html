<!DOCTYPE html>
<html ng-app="redditApp">
  <head>
    <meta charset="utf-8">
    <title>Reddit App</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.0-rc.2/angular.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <link rel="stylesheet" href="app.css">
  </head>
  <body ng-controller="MyController">
    <div class="header">
      <p>Reddit</p>
      <p>Search for Post
        <input type="text" ng-model="searchable.name">
      </p>
      <div ng-click="showme=true">
        <input type="button" value="Add a Post">
      </div>
    </div>
    <div class="postForm" ng-show="showme">
      <form ng-submit="newPost()">
        <input type="text" placeholder="Title" ng-model="title">
        <input type="text" placeholder="Image" ng-model="image">
        <input type="text" placeholder="Description" ng-model="description">
        <input type="text" placeholder="Author" ng-model="author">
        <input type="text" placeholder="Date" ng-model="date">
        <div ng-click="showme=false">
          <input type="submit" value="{{buttonText}}">
        </div>
      </form>
    </div>

    <div class="postLoop" ng-repeat="post in posts | filter:searchable.name">
      <p class="postTitle">{{post.title}}</p>
      <img src="{{post.image}}"></img>
      <p class="description">{{post.description}}</p>
      <p class="author">{{post.author}}</p>
      <p>{{post.date | date}}</p>
      <hr>

      <div ng-click="showComments=true">
        <input type="button" value="Add a Comment">
      </div>


      <div class="showComments" ng-show="showComments">
        <form ng-submit="newComments(post)">
          <input type="text" placeholder="Comment" ng-model="$parent.usercomment">
          <input type="text" placeholder="Commentor" ng-model="$parent.commentor">
          <div ng-click="showComments=false">
            <input type="submit" value="{{commentText}}">
          </div>
        </form>
      </div>

      <div class="commentLoop" ng-show={{post.displayComments}} ng-repeat="comment in post.comments | filter:searchable.commentor">
        <p>{{comment.usercomment}}</p>
        <p>{{comment.commentor}}</p>
    </div>
    <div>
    <input ng-click="toggleComments(post)" type="submit" value="{{commentButton}}">
    </div>
    </div>
  </body>
</html>
